# 正则表达式

> 正则是什么？ 正则是一种规则，仅用于匹配字符串。

## 常用查询表

| 符号 | 表示                         | 替代方案      |
| ---- | ---------------------------- | ------------- |
| \b   | 匹配一个单词边界             |               |
| \s   | 匹配一个空格                 |               |
| \d   | 匹配一个数字                 | [0-9]         |
| \w   | 匹配一个字母、数字或者下划线 | [A-Za-z0-9\_] |
| .    | 匹配一个任意字符             |               |
| *    | 任意个字符（包括0个）        |               |
| +    | 至少一个字符                 |               |
| ?    | 0个或1个字符                 |               |
| {n}  | n个字符                      |               |
| [ ]  | 表示范围                     |               |
| A\|B | 匹配A或B                     |               |
| ^    | 行的开头                     |               |
| $    | 行的结束                     |               |

## 正则表达式

```js
// 有两种写法，结果一样
var re1 = /ABC\-001/;
var re2 = new RegExp('ABC\\-001');

// 判断是否匹配
var re = /^\d{3}\-\d{3,8}$/;
re.test('010-12345'); // true
re.test('010-1234x'); // false
re.test('010 12345'); // false
```

## 灵活应用

存在，就要能够被应用。

### test

```js
// test
/www.hjx24.com/.test('https://www.hjx24.com')

// indexOf
'https://www.hjx24.com'.indexOf('www.hjx24.com')

// 中文
/[\u4e00-\u9fa5]/.test('www.huangjingxin.com/黄敬鑫')
```

### search

```js
// 搜索，返回第一个索引
'huangjx'.search(/a/i) // 2
```

### match

```js
// 返回 匹配值
"186a619b28".match(/\d+/g); // ["186","619","28"] 
```

### split

```js
// 字符匹配
'a b   c'.split(' '); // ['a', 'b', '', '', 'c']

// 正则的灵活应用
'a b   c'.split(/\s+/); // ['a', 'b', 'c']
'a,b, c  d'.split(/[\s\,]+/); // ['a', 'b', 'c', 'd']
'a,b;; c  d'.split(/[\s\,\;]+/); // ['a', 'b', 'c', 'd']
```

### replace

```js
// 拆分手机号
'13866669999'.replace(/(\d{3})(\d{4})(\d{4})/,"$1 $2 $3")
```

### exec

```js
// 正则里面使用 （） 表示，就是要提取的分组
var re = /^(\d{3})-(\d{3,8})$/;
re.exec('010-12345'); // ['010-12345', '010', '12345']
re.exec('010 12345'); // null

// 凶残的例子
var re = /^(0[0-9]|1[0-9]|2[0-3]|[0-9])\:(0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]|[0-9])\:(0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]|[0-9])$/;
re.exec('19:05:30'); // ['19:05:30', '19', '05', '30']

// 无法匹配日期，日期天数参差不齐
```

### 贪婪匹配

正则匹配**默认**是贪婪匹配，也就是匹配尽可能多的字符。后面加`?`就是非贪婪匹配。

```js
// 贪婪匹配
var re = /^(\d+)(0*)$/;
re.exec('102300'); // ['102300', '102300', '']

// 非贪婪匹配
var re = /^(\d+?)(0*)$/;
re.exec('102300'); // ['102300', '1023', '00']
```

### 全局搜索

```js
var s = 'JavaScript, VBScript, JScript and ECMAScript';
var re=/[a-zA-Z]+script/gi;

// 使用全局匹配:
re.exec(s); // ['JavaScript']
re.lastIndex; // 10

re.exec(s); // ['VBScript']
re.lastIndex; // 20

...
re.exec(s); // null，直到结束仍没有匹配到
```

正则表达式的特殊标志：

- 最常用的是`g`，表示全局匹配；
- 指定`i`标志，表示忽略大小写；
- 指定`m`标志，表示执行多行匹配。

## 常用实例

| 表达式                | 说明               | 应用场景 |
| --------------------- | ------------------ | -------- |
| ^[A-Za-z]+$           | 纯英文             |          |
| ^[A-Za-z0-9]+$        | 字母和数字         | 用户名   |
| ^\w+$                 | 数字、字母和下划线 | 变量     |
| ^[\u4e00-\u9fa5]{0,}$ | 汉字               |          |
| ^[a-zA-Z]\w{5,17}$    | 字母开头，6-18位   | 密码     |
| ^.{6-20}$             | 任意字符，6-20位   | 密码     |

## 总结

正则平常用的不多，但处理字符串的时候，正则会非常有效，比如：

1. 用户输入验证
2. 去空格，断句
3. 搜索（指定字符）

::: warning 参考链接

https://www.liaoxuefeng.com/wiki/1022910821149312/1023021582119488

https://www.cnblogs.com/moqiutao/p/6513628.html

:::







